!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){var e,n=navigator.userAgent,i=/iphone/i.test(n),o=/chrome/i.test(n),r=/android/i.test(n);t.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"},t.fn.extend({caret:function(t,e){var n;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof t?(e="number"==typeof e?e:t,this.each(function(){this.setSelectionRange?this.setSelectionRange(t,e):this.createTextRange&&(n=this.createTextRange(),n.collapse(!0),n.moveEnd("character",e),n.moveStart("character",t),n.select())})):(this[0].setSelectionRange?(t=this[0].selectionStart,e=this[0].selectionEnd):document.selection&&document.selection.createRange&&(n=document.selection.createRange(),t=0-n.duplicate().moveStart("character",-1e5),e=t+n.text.length),{begin:t,end:e})},unmask:function(){return this.trigger("unmask")},mask:function(n,a){var s,l,c,u,d,p,f,h;if(!n&&this.length>0){s=t(this[0]);var g=s.data(t.mask.dataName);return g?g():void 0}return a=t.extend({autoclear:t.mask.autoclear,placeholder:t.mask.placeholder,completed:null},a),l=t.mask.definitions,c=[],u=f=n.length,d=null,t.each(n.split(""),function(t,e){"?"==e?(f--,u=t):l[e]?(c.push(new RegExp(l[e])),null===d&&(d=c.length-1),u>t&&(p=c.length-1)):c.push(null)}),this.trigger("unmask").each(function(){function s(){if(a.completed){for(var t=d;p>=t;t++)if(c[t]&&$[t]===g(t))return;a.completed.call(S)}}function g(t){return a.placeholder.charAt(t<a.placeholder.length?t:0)}function m(t){for(;++t<f&&!c[t];);return t}function v(t){for(;--t>=0&&!c[t];);return t}function y(t,e){var n,i;if(!(0>t)){for(n=t,i=m(e);f>n;n++)if(c[n]){if(!(f>i&&c[n].test($[i])))break;$[n]=$[i],$[i]=g(i),i=m(i)}E(),S.caret(Math.max(d,t))}}function b(t){var e,n,i,o;for(e=t,n=g(t);f>e;e++)if(c[e]){if(i=m(e),o=$[e],$[e]=n,!(f>i&&c[i].test(o)))break;n=o}}function x(){var t=S.val(),e=S.caret();if(h&&h.length&&h.length>t.length){for(N(!0);e.begin>0&&!c[e.begin-1];)e.begin--;if(0===e.begin)for(;e.begin<d&&!c[e.begin];)e.begin++;S.caret(e.begin,e.begin)}else{for(N(!0);e.begin<f&&!c[e.begin];)e.begin++;S.caret(e.begin,e.begin)}s()}function w(){N(),S.val()!=D&&S.change()}function T(t){if(!S.prop("readonly")){var e,n,o,r=t.which||t.keyCode;h=S.val(),8===r||46===r||i&&127===r?(e=S.caret(),n=e.begin,o=e.end,o-n===0&&(n=46!==r?v(n):o=m(n-1),o=46===r?m(o):o),k(n,o),y(n,o-1),t.preventDefault()):13===r?w.call(this,t):27===r&&(S.val(D),S.caret(0,N()),t.preventDefault())}}function C(e){if(!S.prop("readonly")){var n,i,o,a=e.which||e.keyCode,l=S.caret();if(!(e.ctrlKey||e.altKey||e.metaKey||32>a)&&a&&13!==a){if(l.end-l.begin!==0&&(k(l.begin,l.end),y(l.begin,l.end-1)),n=m(l.begin-1),f>n&&(i=String.fromCharCode(a),c[n].test(i))){if(b(n),$[n]=i,E(),o=m(n),r){var u=function(){t.proxy(t.fn.caret,S,o)()};setTimeout(u,0)}else S.caret(o);l.begin<=p&&s()}e.preventDefault()}}}function k(t,e){var n;for(n=t;e>n&&f>n;n++)c[n]&&($[n]=g(n))}function E(){S.val($.join(""))}function N(t){var e,n,i,o=S.val(),r=-1;for(e=0,i=0;f>e;e++)if(c[e]){for($[e]=g(e);i++<o.length;)if(n=o.charAt(i-1),c[e].test(n)){$[e]=n,r=e;break}if(i>o.length){k(e+1,f);break}}else $[e]===o.charAt(i)&&i++,u>e&&(r=e);return t?E():u>r+1?a.autoclear||$.join("")===A?(S.val()&&S.val(""),k(0,f)):E():(E(),S.val(S.val().substring(0,r+1))),u?e:d}var S=t(this),$=t.map(n.split(""),function(t,e){return"?"!=t?l[t]?g(e):t:void 0}),A=$.join(""),D=S.val();S.data(t.mask.dataName,function(){return t.map($,function(t,e){return c[e]&&t!=g(e)?t:null}).join("")}),S.one("unmask",function(){S.off(".mask").removeData(t.mask.dataName)}).on("focus.mask",function(){if(!S.prop("readonly")){clearTimeout(e);var t;D=S.val(),t=N(),e=setTimeout(function(){S.get(0)===document.activeElement&&(E(),t==n.replace("?","").length?S.caret(0,t):S.caret(t))},10)}}).on("blur.mask",w).on("keydown.mask",T).on("keypress.mask",C).on("input.mask paste.mask",function(){S.prop("readonly")||setTimeout(function(){var t=N(!0);S.caret(t),s()},0)}),o&&r&&S.off("input.mask").on("input.mask",x),N()})}})});